
<!DOCTYPE html>

<html lang="en">
<head>
<meta charset="utf-8"/>
<meta content="width=device-width, initial-scale=1.0" name="viewport"/>
<meta content="width=device-width, initial-scale=1" name="viewport"/>
<title>Pytest API and builtin fixtures — pytest documentation</title>
<link href="_static/pygments.css" rel="stylesheet" type="text/css"/>
<link href="_static/basic.css" rel="stylesheet" type="text/css"/>
<link href="_static/pygments_pytest.css" rel="stylesheet" type="text/css"/>
<script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
<script src="_static/jquery.js"></script>
<script src="_static/underscore.js"></script>
<script src="_static/_sphinx_javascript_frameworks_compat.js"></script>
<script src="_static/doctools.js"></script>
<script src="_static/sphinx_highlight.js"></script>
<link href="_static/favicon.png" rel="shortcut icon"/>
<link href="search.html" rel="search" title="Search"/>
<script>DOCUMENTATION_OPTIONS.URL_ROOT = '';</script>
</head><body>
<div aria-label="related navigation" class="related" role="navigation">
<h3>Navigation</h3>
<ul>
<li class="right" style="margin-right: 10px">
<a href="py-modindex.html" title="Python Module Index">modules</a></li>
<li class="nav-item nav-item-0"><a href="contents.html">pytest-7.3</a> »</li>
<li class="nav-item nav-item-this"><a href="">Pytest API and builtin fixtures</a></li>
</ul>
</div>
<div class="document">
<div class="documentwrapper">
<div class="body" role="main">
<section id="pytest-api-and-builtin-fixtures">
<a class="dashAnchor" name="//apple_ref/cpp/Section/Pytest API and builtin fixtures"></a><span id="pytest-helpers"></span><h1>Pytest API and builtin fixtures<a class="headerlink" href="#pytest-api-and-builtin-fixtures" title="Permalink to this heading">¶</a></h1>
<p>Most of the information of this page has been moved over to <a class="reference internal" href="reference/reference.html#api-reference"><span class="std std-ref">API Reference</span></a>.</p>
<p>For information on plugin hooks and objects, see <a class="reference internal" href="how-to/writing_plugins.html#plugins"><span class="std std-ref">Writing plugins</span></a>.</p>
<p>For information on the <code class="docutils literal notranslate"><span class="pre">pytest.mark</span></code> mechanism, see <a class="reference internal" href="how-to/mark.html#mark"><span class="std std-ref">How to mark test functions with attributes</span></a>.</p>
<p>For information about fixtures, see <a class="reference internal" href="reference/fixtures.html#fixtures"><span class="std std-ref">Fixtures reference</span></a>. To see a complete list of available fixtures (add <code class="docutils literal notranslate"><span class="pre">-v</span></code> to also see fixtures with leading <code class="docutils literal notranslate"><span class="pre">_</span></code>), type :</p>
<div class="highlight-pytest notranslate"><div class="highlight"><pre><span></span>$ pytest  --fixtures -v
<span class="-Color -Color-Bold">=========================== test session starts ============================</span>
platform linux -- Python 3.x.y, pytest-7.x.y, pluggy-1.x.y -- $PYTHON_PREFIX/bin/python
cachedir: .pytest_cache
rootdir: /home/sweet/project
collected 0 items
cache -- .../_pytest/cacheprovider.py:510
    Return a cache object that can persist state between testing sessions.

    cache.get(key, default)
    cache.set(key, value)

    Keys must be ``/`` separated strings, where the first part is usually the
    name of your plugin or application to avoid clashes with other cache users.

    Values can be any object handled by the json stdlib module.

capsysbinary -- .../_pytest/capture.py:1001
    Enable bytes capturing of writes to ``sys.stdout`` and ``sys.stderr``.

    The captured output is made available via ``capsysbinary.readouterr()``
    method calls, which return a ``(out, err)`` namedtuple.
    ``out`` and ``err`` will be ``bytes`` objects.

    Returns an instance of :class:`CaptureFixture[bytes] &lt;pytest.CaptureFixture&gt;`.

    Example:

    .. code-block:: python

        def test_output(capsysbinary):
            print("hello")
            captured = capsysbinary.readouterr()
            assert captured.out == b"hello\n"

capfd -- .../_pytest/capture.py:1029
    Enable text capturing of writes to file descriptors ``1`` and ``2``.

    The captured output is made available via ``capfd.readouterr()`` method
    calls, which return a ``(out, err)`` namedtuple.
    ``out`` and ``err`` will be ``text`` objects.

    Returns an instance of :class:`CaptureFixture[str] &lt;pytest.CaptureFixture&gt;`.

    Example:

    .. code-block:: python

        def test_system_echo(capfd):
            os.system('echo "hello"')
            captured = capfd.readouterr()
            assert captured.out == "hello\n"

capfdbinary -- .../_pytest/capture.py:1057
    Enable bytes capturing of writes to file descriptors ``1`` and ``2``.

    The captured output is made available via ``capfd.readouterr()`` method
    calls, which return a ``(out, err)`` namedtuple.
    ``out`` and ``err`` will be ``byte`` objects.

    Returns an instance of :class:`CaptureFixture[bytes] &lt;pytest.CaptureFixture&gt;`.

    Example:

    .. code-block:: python

        def test_system_echo(capfdbinary):
            os.system('echo "hello"')
            captured = capfdbinary.readouterr()
            assert captured.out == b"hello\n"

capsys -- .../_pytest/capture.py:973
    Enable text capturing of writes to ``sys.stdout`` and ``sys.stderr``.

    The captured output is made available via ``capsys.readouterr()`` method
    calls, which return a ``(out, err)`` namedtuple.
    ``out`` and ``err`` will be ``text`` objects.

    Returns an instance of :class:`CaptureFixture[str] &lt;pytest.CaptureFixture&gt;`.

    Example:

    .. code-block:: python

        def test_output(capsys):
            print("hello")
            captured = capsys.readouterr()
            assert captured.out == "hello\n"

doctest_namespace [session scope] -- .../_pytest/doctest.py:737
    Fixture that returns a :py:class:`dict` that will be injected into the
    namespace of doctests.

    Usually this fixture is used in conjunction with another ``autouse`` fixture:

    .. code-block:: python

        @pytest.fixture(autouse=True)
        def add_np(doctest_namespace):
            doctest_namespace["np"] = numpy

    For more details: :ref:`doctest_namespace`.

pytestconfig [session scope] -- .../_pytest/fixtures.py:1360
    Session-scoped fixture that returns the session's :class:`pytest.Config`
    object.

    Example::

        def test_foo(pytestconfig):
            if pytestconfig.getoption("verbose") &gt; 0:
                ...

record_property -- .../_pytest/junitxml.py:282
    Add extra properties to the calling test.

    User properties become part of the test report and are available to the
    configured reporters, like JUnit XML.

    The fixture is callable with ``name, value``. The value is automatically
    XML-encoded.

    Example::

        def test_function(record_property):
            record_property("example_key", 1)

record_xml_attribute -- .../_pytest/junitxml.py:305
    Add extra xml attributes to the tag for the calling test.

    The fixture is callable with ``name, value``. The value is
    automatically XML-encoded.

record_testsuite_property [session scope] -- .../_pytest/junitxml.py:343
    Record a new ``&lt;property&gt;`` tag as child of the root ``&lt;testsuite&gt;``.

    This is suitable to writing global information regarding the entire test
    suite, and is compatible with ``xunit2`` JUnit family.

    This is a ``session``-scoped fixture which is called with ``(name, value)``. Example:

    .. code-block:: python

        def test_foo(record_testsuite_property):
            record_testsuite_property("ARCH", "PPC")
            record_testsuite_property("STORAGE_TYPE", "CEPH")

    :param name:
        The property name.
    :param value:
        The property value. Will be converted to a string.

    .. warning::

        Currently this fixture **does not work** with the
        `pytest-xdist &lt;https://github.com/pytest-dev/pytest-xdist&gt;`__ plugin. See
        :issue:`7767` for details.

tmpdir_factory [session scope] -- .../_pytest/legacypath.py:302
    Return a :class:`pytest.TempdirFactory` instance for the test session.

tmpdir -- .../_pytest/legacypath.py:309
    Return a temporary directory path object which is unique to each test
    function invocation, created as a sub directory of the base temporary
    directory.

    By default, a new base temporary directory is created each test session,
    and old bases are removed after 3 sessions, to aid in debugging. If
    ``--basetemp`` is used then it is cleared each session. See :ref:`base
    temporary directory`.

    The returned object is a `legacy_path`_ object.

    .. note::
        These days, it is preferred to use ``tmp_path``.

        :ref:`About the tmpdir and tmpdir_factory fixtures&lt;tmpdir and tmpdir_factory&gt;`.

    .. _legacy_path: https://py.readthedocs.io/en/latest/path.html

caplog -- .../_pytest/logging.py:498
    Access and control log capturing.

    Captured logs are available through the following properties/methods::

    * caplog.messages        -&gt; list of format-interpolated log messages
    * caplog.text            -&gt; string containing formatted log output
    * caplog.records         -&gt; list of logging.LogRecord instances
    * caplog.record_tuples   -&gt; list of (logger_name, level, message) tuples
    * caplog.clear()         -&gt; clear captured records and formatted log output string

monkeypatch -- .../_pytest/monkeypatch.py:29
    A convenient fixture for monkey-patching.

    The fixture provides these methods to modify objects, dictionaries, or
    :data:`os.environ`:

    * :meth:`monkeypatch.setattr(obj, name, value, raising=True) &lt;pytest.MonkeyPatch.setattr&gt;`
    * :meth:`monkeypatch.delattr(obj, name, raising=True) &lt;pytest.MonkeyPatch.delattr&gt;`
    * :meth:`monkeypatch.setitem(mapping, name, value) &lt;pytest.MonkeyPatch.setitem&gt;`
    * :meth:`monkeypatch.delitem(obj, name, raising=True) &lt;pytest.MonkeyPatch.delitem&gt;`
    * :meth:`monkeypatch.setenv(name, value, prepend=None) &lt;pytest.MonkeyPatch.setenv&gt;`
    * :meth:`monkeypatch.delenv(name, raising=True) &lt;pytest.MonkeyPatch.delenv&gt;`
    * :meth:`monkeypatch.syspath_prepend(path) &lt;pytest.MonkeyPatch.syspath_prepend&gt;`
    * :meth:`monkeypatch.chdir(path) &lt;pytest.MonkeyPatch.chdir&gt;`
    * :meth:`monkeypatch.context() &lt;pytest.MonkeyPatch.context&gt;`

    All modifications will be undone after the requesting test function or
    fixture has finished. The ``raising`` parameter determines if a :class:`KeyError`
    or :class:`AttributeError` will be raised if the set/deletion operation does not have the
    specified target.

    To undo modifications done by the fixture in a contained scope,
    use :meth:`context() &lt;pytest.MonkeyPatch.context&gt;`.

recwarn -- .../_pytest/recwarn.py:30
    Return a :class:`WarningsRecorder` instance that records all warnings emitted by test functions.

    See https://docs.pytest.org/en/latest/how-to/capture-warnings.html for information
    on warning categories.

tmp_path_factory [session scope] -- .../_pytest/tmpdir.py:245
    Return a :class:`pytest.TempPathFactory` instance for the test session.

tmp_path -- .../_pytest/tmpdir.py:260
    Return a temporary directory path object which is unique to each test
    function invocation, created as a sub directory of the base temporary
    directory.

    By default, a new base temporary directory is created each test session,
    and old bases are removed after 3 sessions, to aid in debugging.
    This behavior can be configured with :confval:`tmp_path_retention_count` and
    :confval:`tmp_path_retention_policy`.
    If ``--basetemp`` is used then it is cleared each session. See :ref:`base
    temporary directory`.

    The returned object is a :class:`pathlib.Path` object.


<span class="-Color -Color-Yellow">========================== no tests ran in 0.12s ===========================</span>
</pre></div>
</div>
<p>You can also interactively ask for help, e.g. by typing on the Python interactive prompt something like:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">pytest</span>

<span class="n">help</span><span class="p">(</span><span class="n">pytest</span><span class="p">)</span>
</pre></div>
</div>
</section>
<div class="clearer"></div>
</div>
</div>
<span id="sidebar-top"></span>
<div class="clearer"></div>
</div>
<div class="footer" role="contentinfo">
        © Copyright 2015, holger krekel and pytest-dev team.
      Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 5.3.0.
    </div>
<script src="_static/version_warning_offset.js"></script>
</body>
</html>
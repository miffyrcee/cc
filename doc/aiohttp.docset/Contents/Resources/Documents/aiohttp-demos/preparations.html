
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>Preparations &#8212; aiohttp-demos 0.2 documentation</title>
    <link rel="stylesheet" href="_static/alabaster.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <link rel="shortcut icon" href="_static/aiohttp-icon.ico"/>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Getting started" href="tutorial.html" />
    <link rel="prev" title="Welcome to aiohttp-demos" href="index.html" />
   
  <link rel="stylesheet" href="_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
          

          <div class="body" role="main">
            
  <div class="section" id="preparations">
<span id="aiohttp-demos-polls-preparations-beginning"></span><h1>Preparations<a class="headerlink" href="#preparations" title="Permalink to this headline">¶</a></h1>
<p>Start with an empty folder and create files alongside with the tutorial.
If you want the full source code in advance or for comparison,
check out the <a class="reference external" href="https://github.com/aio-libs/aiohttp-demos/tree/master/demos/polls/">demo source</a>.</p>
<div class="section" id="project-structure">
<span id="aiohttp-demos-polls-preparations-project-structure"></span><h2>Project structure<a class="headerlink" href="#project-structure" title="Permalink to this headline">¶</a></h2>
<p>At the end of the tutorial, this project’s structure should look very similar to
other Python based web projects:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>.
├── aiohttpdemo_polls
│   ├── static
│   │   ├── images
│   │   │   └── background.png
│   │   └── style.css
│   ├── templates
│   │   ├── 404.html
│   │   ├── 500.html
│   │   ├── base.html
│   │   ├── detail.html
│   │   ├── index.html
│   │   └── results.html
│   ├── db.py
│   ├── __init__.py
│   ├── __main__.py
│   ├── main.py
│   ├── middlewares.py
│   ├── routes.py
│   ├── settings.py
│   ├── utils.py
│   └── views.py
├── config
│   ├── polls_test.yaml
│   └── polls.yaml
├── tests
│   ├── conftest.py
│   ├── __init__.py
│   └── test_integration.py
├── init_db.py
├── Makefile
├── README.rst
├── requirements.txt
├── setup.py
└── tox.ini
</pre></div>
</div>
</div>
<div class="section" id="environment">
<span id="aiohttp-demos-polls-preparations-environment"></span><h2>Environment<a class="headerlink" href="#environment" title="Permalink to this headline">¶</a></h2>
<p>We suggest you to create an isolated Python virtual environment:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ python3 -m venv env
$ source env/bin/activate
</pre></div>
</div>
<p>During the tutorial, you will be instructed to install some packages inside this
activated environment. For example, you will use <code class="docutils literal notranslate"><span class="pre">$</span> <span class="pre">pip</span> <span class="pre">install</span> <span class="pre">aiopg</span></code>
to install <code class="docutils literal notranslate"><span class="pre">aiopg</span></code> before doing the database related sections.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p>If you decided to run the application from the repo’s source code, install
the app and its requirements:</p>
<div class="last highlight-shell notranslate"><div class="highlight"><pre><span></span>$ <span class="nb">cd</span> demos/polls
$ pip install -e .
</pre></div>
</div>
</div>
<p>Check your Python version (tutorial requires Python 3.5 or newer):</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ python -V
Python 3.6.5
</pre></div>
</div>
<p>Install <code class="docutils literal notranslate"><span class="pre">aiohttp</span></code></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ pip install aiohttp
</pre></div>
</div>
<p>Check the aiohttp version:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ python3 -c &#39;import aiohttp; print(aiohttp.__version__)&#39;
3.1.3
</pre></div>
</div>
</div>
<div class="section" id="database">
<span id="aiohttp-demos-polls-preparations-database"></span><h2>Database<a class="headerlink" href="#database" title="Permalink to this headline">¶</a></h2>
<div class="section" id="running-server">
<h3>Running server<a class="headerlink" href="#running-server" title="Permalink to this headline">¶</a></h3>
<p>We could have created this tutorial based on a local <code class="docutils literal notranslate"><span class="pre">sqlite</span></code> solution,
but <code class="docutils literal notranslate"><span class="pre">sqlite</span></code> is almost never used in real-world applications. To better
reflect a production example, we decided to use Postgres for the tutorial.</p>
<p>Install and run the PostgreSQL database server: <a class="reference external" href="http://www.postgresql.org/download/">http://www.postgresql.org/download/</a>.
To use PostgreSQL in a more isolated way, you may use Docker as an alternative:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ docker run --rm -it -p 5432:5432 postgres:10
</pre></div>
</div>
</div>
<div class="section" id="initial-setup">
<h3>Initial setup<a class="headerlink" href="#initial-setup" title="Permalink to this headline">¶</a></h3>
<p>We need to create a running database and a user with write access.
For these and other database related actions, consider one of the following
options:</p>
<ul class="simple">
<li>prepare manually using the database’s interactive prompt</li>
<li>prepare and execute <code class="docutils literal notranslate"><span class="pre">.sql</span></code> files</li>
<li>use migration tool</li>
<li>use default database/user <code class="docutils literal notranslate"><span class="pre">postgres</span></code></li>
</ul>
<p>Whichever option you choose, make sure you remember the corresponding values to put them
into a config file. Here are example commands to run manually</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ psql -U postgres -h localhost
&gt; CREATE DATABASE aiohttpdemo_polls;
&gt; CREATE USER aiohttpdemo_user WITH PASSWORD &#39;aiohttpdemo_pass&#39;;
&gt; GRANT ALL PRIVILEGES ON DATABASE aiohttpdemo_polls TO aiohttpdemo_user;
</pre></div>
</div>
<p>Use the <em>psql</em> commands, <code class="docutils literal notranslate"><span class="pre">\l</span></code> and <code class="docutils literal notranslate"><span class="pre">\du</span></code>, to check results.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p>If you decided to run the application from the repo’s source code, this script
( <a class="reference download internal" href="_downloads/init_db.py" download=""><code class="xref download docutils literal notranslate"><span class="pre">init_db.py</span></code></a> ) will create a
database and running server, as well as create tables and populate them
with sample data</p>
<div class="last highlight-default notranslate"><div class="highlight"><pre><span></span>$ python init_db.py
</pre></div>
</div>
</div>
</div>
</div>
</div>


          </div>
          
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2017, Aiohttp contributors.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 1.7.7</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.11</a>
      
      |
      <a href="_sources/preparations.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>

<!DOCTYPE html>

<html lang="en">
<head>
<meta charset="utf-8"/>
<meta content="width=device-width, initial-scale=1.0" name="viewport"/>
<meta content="width=device-width, initial-scale=1" name="viewport"/>
<title>How to mark test functions with attributes — pytest documentation</title>
<link href="../_static/pygments.css" rel="stylesheet" type="text/css"/>
<link href="../_static/basic.css" rel="stylesheet" type="text/css"/>
<link href="../_static/pygments_pytest.css" rel="stylesheet" type="text/css"/>
<script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
<script src="../_static/jquery.js"></script>
<script src="../_static/underscore.js"></script>
<script src="../_static/_sphinx_javascript_frameworks_compat.js"></script>
<script src="../_static/doctools.js"></script>
<script src="../_static/sphinx_highlight.js"></script>
<link href="../_static/favicon.png" rel="shortcut icon"/>
<link href="../search.html" rel="search" title="Search"/>
<link href="parametrize.html" rel="next" title="How to parametrize fixtures and test functions"/>
<link href="fixtures.html" rel="prev" title="How to use fixtures"/>
<script>DOCUMENTATION_OPTIONS.URL_ROOT = '';</script>
</head><body>
<div aria-label="related navigation" class="related" role="navigation">
<h3>Navigation</h3>
<ul>
<li class="right" style="margin-right: 10px">
<a href="../py-modindex.html" title="Python Module Index">modules</a></li>
<li class="right">
<a accesskey="N" href="parametrize.html" title="How to parametrize fixtures and test functions">next</a> |</li>
<li class="right">
<a accesskey="P" href="fixtures.html" title="How to use fixtures">previous</a> |</li>
<li class="nav-item nav-item-0"><a href="../contents.html">pytest-7.3</a> »</li>
<li class="nav-item nav-item-this"><a href="">How to mark test functions with attributes</a></li>
</ul>
</div>
<div class="document">
<div class="documentwrapper">
<div class="body" role="main">
<section id="how-to-mark-test-functions-with-attributes">
<a class="dashAnchor" name="//apple_ref/cpp/Section/How to mark test functions with attributes"></a><span id="mark"></span><h1>How to mark test functions with attributes<a class="headerlink" href="#how-to-mark-test-functions-with-attributes" title="Permalink to this heading">¶</a></h1>
<p>By using the <code class="docutils literal notranslate"><span class="pre">pytest.mark</span></code> helper you can easily set
metadata on your test functions. You can find the full list of builtin markers
in the <a class="reference internal" href="../reference/reference.html#marks-ref"><span class="std std-ref">API Reference</span></a>. Or you can list all the markers, including
builtin and custom, using the CLI - <code class="code docutils literal notranslate"><span class="pre">pytest</span> <span class="pre">--markers</span></code>.</p>
<p>Here are some of the builtin markers:</p>
<ul class="simple">
<li><p><a class="reference internal" href="fixtures.html#usefixtures"><span class="std std-ref">usefixtures</span></a> - use fixtures on a test function or class</p></li>
<li><p><a class="reference internal" href="capture-warnings.html#filterwarnings"><span class="std std-ref">filterwarnings</span></a> - filter certain warnings of a test function</p></li>
<li><p><a class="reference internal" href="skipping.html#skip"><span class="std std-ref">skip</span></a> - always skip a test function</p></li>
<li><p><a class="reference internal" href="skipping.html#skipif"><span class="std std-ref">skipif</span></a> - skip a test function if a certain condition is met</p></li>
<li><p><a class="reference internal" href="skipping.html#xfail"><span class="std std-ref">xfail</span></a> - produce an “expected failure” outcome if a certain
condition is met</p></li>
<li><p><a class="reference internal" href="parametrize.html#parametrizemark"><span class="std std-ref">parametrize</span></a> - perform multiple calls
to the same test function.</p></li>
</ul>
<p>It’s easy to create custom markers or to apply markers
to whole test classes or modules. Those markers can be used by plugins, and also
are commonly used to <a class="reference internal" href="../example/markers.html#mark-run"><span class="std std-ref">select tests</span></a> on the command-line with the <code class="docutils literal notranslate"><span class="pre">-m</span></code> option.</p>
<p>See <a class="reference internal" href="../example/markers.html#mark-examples"><span class="std std-ref">Working with custom markers</span></a> for examples which also serve as documentation.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Marks can only be applied to tests, having no effect on
<a class="reference internal" href="../reference/fixtures.html#fixtures"><span class="std std-ref">fixtures</span></a>.</p>
</div>
<section id="registering-marks">
<h2>Registering marks<a class="headerlink" href="#registering-marks" title="Permalink to this heading">¶</a></h2>
<p>You can register custom marks in your <code class="docutils literal notranslate"><span class="pre">pytest.ini</span></code> file like this:</p>
<div class="highlight-ini notranslate"><div class="highlight"><pre><span></span><span class="k">[pytest]</span>
<span class="na">markers</span><span class="w"> </span><span class="o">=</span>
<span class="w">    </span><span class="na">slow</span><span class="o">:</span><span class="w"> </span><span class="s">marks tests as slow (deselect with '-m "not slow"')</span>
<span class="w">    </span><span class="na">serial</span>
</pre></div>
</div>
<p>or in your <code class="docutils literal notranslate"><span class="pre">pyproject.toml</span></code> file like this:</p>
<div class="highlight-toml notranslate"><div class="highlight"><pre><span></span><span class="k">[tool.pytest.ini_options]</span>
<span class="n">markers</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span>
<span class="w">    </span><span class="s">"slow: marks tests as slow (deselect with '-m \"not slow\"')"</span><span class="p">,</span>
<span class="w">    </span><span class="s">"serial"</span><span class="p">,</span>
<span class="p">]</span>
</pre></div>
</div>
<p>Note that everything past the <code class="docutils literal notranslate"><span class="pre">:</span></code> after the mark name is an optional description.</p>
<p>Alternatively, you can register new markers programmatically in a
<a class="reference internal" href="../reference/reference.html#initialization-hooks"><span class="std std-ref">pytest_configure</span></a> hook:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">pytest_configure</span><span class="p">(</span><span class="n">config</span><span class="p">):</span>
    <span class="n">config</span><span class="o">.</span><span class="n">addinivalue_line</span><span class="p">(</span>
        <span class="s2">"markers"</span><span class="p">,</span> <span class="s2">"env(name): mark test to run only on named environment"</span>
    <span class="p">)</span>
</pre></div>
</div>
<p>Registered marks appear in pytest’s help text and do not emit warnings (see the next section). It
is recommended that third-party plugins always <a class="reference internal" href="writing_plugins.html#registering-markers"><span class="std std-ref">register their markers</span></a>.</p>
</section>
<section id="raising-errors-on-unknown-marks">
<a class="dashAnchor" name="//apple_ref/cpp/Section/Raising errors on unknown marks"></a><span id="unknown-marks"></span><h2>Raising errors on unknown marks<a class="headerlink" href="#raising-errors-on-unknown-marks" title="Permalink to this heading">¶</a></h2>
<p>Unregistered marks applied with the <code class="docutils literal notranslate"><span class="pre">@pytest.mark.name_of_the_mark</span></code> decorator
will always emit a warning in order to avoid silently doing something
surprising due to mistyped names. As described in the previous section, you can disable
the warning for custom marks by registering them in your <code class="docutils literal notranslate"><span class="pre">pytest.ini</span></code> file or
using a custom <code class="docutils literal notranslate"><span class="pre">pytest_configure</span></code> hook.</p>
<p>When the <code class="docutils literal notranslate"><span class="pre">--strict-markers</span></code> command-line flag is passed, any unknown marks applied
with the <code class="docutils literal notranslate"><span class="pre">@pytest.mark.name_of_the_mark</span></code> decorator will trigger an error. You can
enforce this validation in your project by adding <code class="docutils literal notranslate"><span class="pre">--strict-markers</span></code> to <code class="docutils literal notranslate"><span class="pre">addopts</span></code>:</p>
<div class="highlight-ini notranslate"><div class="highlight"><pre><span></span><span class="k">[pytest]</span>
<span class="na">addopts</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">--strict-markers</span>
<span class="na">markers</span><span class="w"> </span><span class="o">=</span>
<span class="w">    </span><span class="na">slow</span><span class="o">:</span><span class="w"> </span><span class="s">marks tests as slow (deselect with '-m "not slow"')</span>
<span class="w">    </span><span class="na">serial</span>
</pre></div>
</div>
</section>
</section>
<div class="clearer"></div>
</div>
</div>
<span id="sidebar-top"></span>
<div class="clearer"></div>
</div>
<div class="footer" role="contentinfo">
        © Copyright 2015, holger krekel and pytest-dev team.
      Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 5.3.0.
    </div>
<script src="../_static/version_warning_offset.js"></script>
</body>
</html>